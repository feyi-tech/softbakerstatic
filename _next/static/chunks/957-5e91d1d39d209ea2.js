"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[957],{6957:function(e,t,o){o.d(t,{ZP:function(){return z},EA:function(){return J},e_:function(){return V}});var r=o(5893),n=o(7291),s=o(7294),i=o(2752),a=o(1963),l=o(1948),c=o(4504),d=o(8911),u=o(4641),m=o(3100),h=o(3793),p=o(7018),E=o(5154);let w=e=>{let{bg:t,color:o,children:n,placement:s,onClose:w,isOpen:_,isClosable:T,title:I,footer:g,hideModeSwitch:A,h:O,height:P,...R}=e;return(0,r.jsxs)(i.u_,{onClose:w||(()=>{}),isOpen:_,isCentered:!0,children:[(0,r.jsx)(a.Z,{}),(0,r.jsxs)(l.h,{bg:t,color:o,minH:O||P||"50vh",maxH:"70vh",w:{base:"95%",md:"650px"},borderRadius:"16px !important",children:[(0,r.jsxs)(c.x,{borderBottomWidth:"1px",w:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,r.jsx)(d.x,{as:"div",fontSize:{base:"1.1rem",md:"1.3rem"},textTransform:"capitalize",children:I}),(0,r.jsx)(u.U,{children:w&&(T||void 0===T)?(0,r.jsx)(m.xu,{onClick:w,cursor:"pointer",display:"block",children:(0,r.jsx)(E.aHS,{size:"24px"})}):null})]}),(0,r.jsx)(h.f,{...R,children:n}),g?(0,r.jsx)(p.m,{children:g}):null]})]})};var _=o(3247),T=o(3977),I=o(2393),g=o(9501),A=o(7442);let O=e=>(0,A.tm)(e),P=e=>/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e),R=e=>null==e,C=e=>R(e)||0==e.length,S=(e,t)=>{if(!t)return null;let o={user:t,providerId:t.providerId,operationType:e};return o},f=e=>{switch(e){case n.F7.FACEBOOK:return"Facebook";case n.F7.GOOGLE:return"Google";case n.F7.TWITTER:return"Twitter";case n.F7.GITHUB:return"Github";default:return null}},L=()=>"FIREBASE_AUTH_FLOW_CAPTCHA_".concat(Math.round(1e6*Math.random())),x=e=>{let t=document.createElement("div"),o="".concat(L());t.setAttribute("id",o);let r=document.createElement("div");return r.setAttribute("id","".concat(o,"_PARENT")),r.setAttribute("style","width: 100vw !important; height: 50vh !important"),r.appendChild(t),document.getElementsByTagName("body")[0].appendChild(r),window.recaptchaVerifier=new n.lI(o,{size:"invisible"},e),o},v=e=>{let t=document.getElementById("".concat(e,"_PARENT"));if(t){try{window.recaptchaVerifier.clear(),delete window.recaptchaVerifier}catch(e){}document.getElementsByTagName("body")[0].removeChild(t)}},y={AUTH_FLOW_EMAIL_FOR_SIGN_IN:"AUTH_FLOW_EMAIL_FOR_SIGN_IN",AUTH_FLOW_AUTH_LINK_PENDING_CREDENTIAL:"AUTH_FLOW_AUTH_LINK_PENDING_CREDENTIAL",AUTH_FLOW_REDIRECT_CALLBACK_URL:"AUTH_FLOW_REDIRECT_CALLBACK_URL",AUTH_FLOW_REDIRECT_CALLBACK_REPLACE_URL:"AUTH_FLOW_REDIRECT_CALLBACK_REPLACE_URL",AUTH_FLOW_PHONE_OTP_SUBMITTED:"AUTH_FLOW_PHONE_OTP_SUBMITTED",AUTH_FLOW_SOCIAL_CREDENTIAL:"AUTH_FLOW_SOCIAL_CREDENTIAL",AUTH_FLOW_SOCIAL_CREDENTIAL_ERROR:"AUTH_FLOW_SOCIAL_CREDENTIAL_ERROR",AUTH_FLOW_SOCIAL_CREDENTIAL_ERROR_TEMP:"AUTH_FLOW_SOCIAL_CREDENTIAL_ERROR_TEMP",AUTH_FLOW_PROMPT_PASSWORD_SUBMITTED:"AUTH_FLOW_PROMPT_PASSWORD_SUBMITTED",AUTH_FLOW_PROMPT_EMAIL_SUBMITTED:"AUTH_FLOW_PROMPT_EMAIL_SUBMITTED",AUTH_FLOW_POLLING_STOP_FLAG:"AUTH_FLOW_POLLING_STOP_FLAG"},U={otpInputTitle:"otpInputTitle",otpInputPlaceholder:"otpInputPlaceholder",otpConfirmationButtonText:"otpConfirmationButtonText",emptyOtpError:"emptyOtpError",newPasswordInputTitle:"newPasswordInputTitle",newPasswordInputPlaceholder:"newPasswordInputPlaceholder",passwordRetypeInputTitle:"passwordRetypeInputTitle",passwordRetypeInputPlaceholder:"passwordRetypeInputPlaceholder",passwordConfirmationButtonText:"passwordConfirmationButtonText",passwordMismatchError:"passwordMismatchError",emptyPasswordError:"emptyPasswordError",passwordInputTitle:"passwordInputTitle",passwordInputPlaceholder:"passwordInputPlaceholder",emailInputTitle:"emailInputTitle",emailInputPlaceholder:"emailInputPlaceholder",emailConfirmationButtonText:"emailConfirmationButtonText",emptyEmailError:"emptyEmailError",emptyEmailAndPhoneError:"emptyEmailAndPhoneError",invalidEmailOrPhoneError:"invalidEmailOrPhoneError",emptyAuthError:"emptyAuthError",emptyFirestoreError:"emptyFirestoreError",emptyCustomDataCollectionPath:"emptyCustomDataCollectionPath",phoneHasNoEmailError:"phoneHasNoEmailError",noEmailVerificationCode:"noEmailVerificationCode",noEmailVerificationMode:"noEmailVerificationMode",invalidEmailVerificationCode:"invalidEmailVerificationCode",invalidEmailVerificationMode:"invalidEmailVerificationMode",credentialCollisionResolutionRequestTitle:"Account already exist.",credentialCollisionResolutionAcceptText:"Yes, link accounts",credentialCollisionResolutionDeclineText:"Cancel"},F={otpInputTitle:"Enter the code sent to your phone.",otpInputPlaceholder:"Enter code.",otpConfirmationButtonText:"Confirm OTP.",emptyOtpError:"No OTP entered.",newPasswordInputTitle:"New password.",newPasswordInputPlaceholder:"Enter new password.",passwordRetypeInputTitle:"Re-type password.",passwordRetypeInputPlaceholder:"Type password again.",passwordConfirmationButtonText:"Update password.",passwordMismatchError:"Your password doesn't match.",emptyPasswordError:"No password provided.",passwordInputTitle:"Password.",passwordInputPlaceholder:"Enter your password.",emailInputTitle:"Enter",emailInputPlaceholder:"Enter your email address",emailConfirmationButtonText:"Sign in",emptyEmailError:"No email provided.",emptyEmailAndPhoneError:"Please provide a email address or phone number",invalidEmailOrPhoneError:"Please provide a valid email address or phone number",emptyAuthError:"Firebase Auth is empty.",emptyFirestoreError:"Firebase Firestore is empty.",emptyCustomDataCollectionPath:"customDataCollectionPath is empty.",phoneHasNoEmailError:"No email address has been linked to your phone number. Please sign up first.",noEmailVerificationCode:"No email verification code.",noEmailVerificationMode:"No email verification mode.",invalidEmailVerificationCode:"Invalid email verification code.",invalidEmailVerificationMode:"Invalid email verification mode."},N="recaptcha-container",H={promptPollInterval:200,messages:F,recaptchaContainerId:N,customDataCollectionPath:void 0,firestore:void 0},D=(e,t)=>{let[o,i]=(0,s.useState)(),[a,l]=(0,s.useState)(!1),[c,d]=(0,s.useState)(),[u,h]=(0,s.useState)(),[p,E]=(0,s.useState)(),[A,O]=(0,s.useState)(),[P,R]=(0,s.useState)(H);(0,s.useEffect)(()=>{R({...H,...t||{}})},[t]);let f=(t,o,r,s,i,a,l,c)=>new Promise((d,u)=>{if(e){if(r){if(e.currentUser){let n=S("signIn",e.currentUser);C(e.currentUser.phoneNumber)||e.currentUser.phoneNumber!==r?d(n):C(e.currentUser.email)&&o&&t?M(n,o,t,a).then(e=>{B(e,s,i).then(e=>{d(e)}).catch(t=>{d(e)})}).catch(e=>{u(e)}):a&&j(n,a,l,c).then(e=>{B(e,s,i).then(e=>{d(e)}).catch(t=>{d(e)})}).catch(e=>{u(e)})}else{let n;A?n=A:O(n=x(e)),window.recaptchaVerifier.verify().then(()=>{L(r,window.recaptchaVerifier,o,t,a,l,c).then(e=>{B(e,s,i).then(e=>{v(n),O(void 0),d(e)}).catch(t=>{v(n),O(void 0),d(e)})}).catch(e=>{v(n),O(void 0),u(e)})}).catch(e=>{v(n),O(void 0),u(e)})}}else if(o&&t){if(e.currentUser){let t=S("signIn",e.currentUser);a?j(t,a,l,c).then(e=>{B(e,s,i).then(e=>{d(e)}).catch(t=>{d(e)})}).catch(e=>{u(e)}):B(t,s,i).then(e=>{d(e)}).catch(e=>{d(t)})}else(0,n.Xb)(e,o,t).then(e=>{(0,n.w$)(e.user),a?j(e,a,l,c).then(e=>{d(e)}).catch(e=>{u(e)}):d(e)}).catch(e=>{u(e)})}else r||o?t||u(new T.ZR(U.emptyPasswordError,P.messages[U.emptyPasswordError])):u(new T.ZR(U.emptyEmailAndPhoneError,P.messages[U.emptyEmailAndPhoneError]))}else u(new T.ZR(U.emptyAuthError,P.messages[U.emptyAuthError]))}),L=(t,o,r,s,i,a,l)=>new Promise((c,d)=>{t&&e&&o?(0,n.$g)(e,t,o).then(e=>{F(e,r,s,i,a,l).then(e=>{c(e)}).catch(e=>{d(e)})}).catch(e=>{d(e)}):e||d(new T.ZR(U.emptyAuthError,P.messages[U.emptyAuthError]))}),F=(e,t,o,r,n,s)=>new Promise(async(a,l)=>{N().then(c=>{W(),e.confirm(c).then(e=>{t&&o?M(e,t,o,r,n,s).then(e=>{i(!0),a(e)}).catch(e=>{l(e)}):r?j(e,r,n,s).then(e=>{a(e)}).catch(e=>{l(e)}):a(e)}).catch(e=>{l(e)})}).catch(e=>{W(),l(e)})}),N=()=>new Promise((e,t)=>{l(!0),D(e,t)}),D=(e,t)=>{let o=window.sessionStorage.getItem(y.AUTH_FLOW_PHONE_OTP_SUBMITTED);console.log("pollOtp:otpRequestDone.otp",o),o?C(o)?t(new T.ZR(U.emptyOtpError,P.messages[U.emptyOtpError])):e(o):setTimeout(()=>{D(e,t)},P.promptPollInterval)},W=()=>{d(void 0),l(!1),h(!1),window.sessionStorage.removeItem(y.AUTH_FLOW_PHONE_OTP_SUBMITTED)},M=(t,o,r,s,a,l)=>new Promise((c,d)=>{let u=n.w9.credential(o,r);t.user.email?c(t):(0,n.ZJ)(t.user,u).then(t=>{i(!0),s?j(t,s,a,l).then(e=>{c(e)}).catch(t=>{null==e||e.signOut(),d(t)}):c(t)}).catch(t=>{null==e||e.signOut(),d&&d(t)})}),j=(e,t,o,r)=>new Promise((n,s)=>{if((r||P.firestore)&&(o||P.customDataCollectionPath)){let a=(0,_.JU)(r||P.firestore,o||P.customDataCollectionPath,e.user.uid);(0,_.QT)(a).then(o=>{o.exists()?n(e):(0,_.pl)(a,{...t,uid:e.user.uid}).then(()=>{i(!0),n(e)}).catch(e=>{s(e)})}).catch(e=>{s(e)})}else r&&P.firestore?o&&P.customDataCollectionPath||s(new T.ZR(U.emptyCustomDataCollectionPath,P.messages[U.emptyCustomDataCollectionPath])):s(new T.ZR(U.emptyFirestoreError,P.messages[U.emptyFirestoreError]))}),b=(e,t,o,r)=>new Promise((n,s)=>{if((r||P.firestore)&&(o||P.customDataCollectionPath)){let i=(0,_.JU)(r||P.firestore,o||P.customDataCollectionPath,e.uid);(0,_.pl)(i,{...t,uid:e.uid},{merge:!0}).then(()=>{n(e)}).catch(e=>{s(e)})}else r&&P.firestore?o&&P.customDataCollectionPath||s(new T.ZR(U.emptyCustomDataCollectionPath,P.messages[U.emptyCustomDataCollectionPath])):s(new T.ZR(U.emptyFirestoreError,P.messages[U.emptyFirestoreError]))}),B=(e,t,o)=>new Promise((r,s)=>{if(C(t)&&C(o))r(e);else{let i={};t&&!C(t)&&(i.displayName=t),o&&!C(o)&&(i.photoURL=o),(0,n.ck)(e.user,i).then(()=>{r(e)}).catch(e=>{s(e)})}}),Z=()=>{E(""),c&&0!=c.length?window.sessionStorage.setItem(y.AUTH_FLOW_PHONE_OTP_SUBMITTED,c):E(P.messages[U.emptyOtpError])},k=()=>(0,r.jsx)(m.xu,{children:a?(0,r.jsxs)(w,{title:P.messages[U.otpInputTitle],isOpen:!0,onClose:()=>{d(void 0),window.sessionStorage.setItem(y.AUTH_FLOW_PHONE_OTP_SUBMITTED,"")},children:[(0,r.jsx)(I.Z,{tpe:I.Z.TYPES.text,mb:4,title:P.messages[U.otpInputTitle],placeholder:P.messages[U.otpInputPlaceholder],value:c,onChange:e=>{d(e)},errorMessage:p}),(0,r.jsx)(g.Z,{onClick:Z,loading:!C(c)&&u,children:P.messages[U.otpConfirmationButtonText]})]}):null});return{signUp:f,updateCustomData:b,onSignUpPrompt:k}},W=e=>{let{bg:t,color:o,children:n,placement:s,onClose:w,isOpen:_,isClosable:T,title:I,footer:g,hideModeSwitch:A,h:O,height:P,...R}=e;return(0,r.jsxs)(i.u_,{onClose:w||(()=>{}),isOpen:_,isCentered:!0,children:[(0,r.jsx)(a.Z,{}),(0,r.jsxs)(l.h,{bg:t,color:o,minH:O||P||"50vh",w:{base:"95%",md:"650px"},borderRadius:"16px !important",children:[(0,r.jsxs)(c.x,{borderBottomWidth:"1px",w:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,r.jsx)(d.x,{as:"div",fontSize:{base:"1.1rem",md:"1.3rem"},textTransform:"capitalize",children:I}),(0,r.jsx)(u.U,{children:w&&(T||void 0===T)?(0,r.jsx)(m.xu,{onClick:w,cursor:"pointer",display:"block",children:(0,r.jsx)(E.aHS,{size:"24px"})}):null})]}),(0,r.jsx)(h.f,{...R,children:n}),(0,r.jsx)(p.m,{children:g})]})]})},M={promptPollInterval:200,messages:F,recaptchaContainerId:N,actionCodeSettings:void 0,sendEmailVerificationLink:!1},j=(e,t)=>{let[o,i]=(0,s.useState)(!1),[a,l]=(0,s.useState)(),[c,d]=(0,s.useState)(),[u,h]=(0,s.useState)(),[p,E]=(0,s.useState)(),[w,_]=(0,s.useState)(M);(0,s.useEffect)(()=>{t=t||{};let e={...t};if(!t.actionCodeSettings||C(t.actionCodeSettings.url)){var o;e.actionCodeSettings={...t.actionCodeSettings||{},url:null==window?void 0:null===(o=window.location)||void 0===o?void 0:o.href}}_({...M,...e})},[t]);let A=(t,o,r)=>new Promise((s,i)=>{if(e){if(O(t)){let r;p?r=p:E(r=x(e)),window.recaptchaVerifier.verify().then(()=>{R(t,window.recaptchaVerifier,o).then(e=>{v(r),E(void 0),s(e)}).catch(e=>{v(r),E(void 0),i(e)})}).catch(e=>{v(r),E(void 0),i(e)})}else P(t)?o&&0!=o.length?N(t,o).then(e=>{let t=e.user;!t.emailVerified&&w.sendEmailVerificationLink?(0,n.w$)(t,r||w.actionCodeSettings).then(()=>{s(e)}).catch(e=>{i(e)}):s(e)}).catch(e=>{i(e)}):(0,n.oo)(e,t,r||w.actionCodeSettings).then(()=>{window.localStorage.setItem(y.AUTH_FLOW_EMAIL_FOR_SIGN_IN,t),s(null)}).catch(e=>{i(e)}):i(new T.ZR(U.invalidEmailOrPhoneError,w.messages[U.invalidEmailOrPhoneError]))}else i(new T.ZR(U.emptyAuthError,w.messages[U.emptyAuthError]))}),R=(t,o,r)=>new Promise((s,i)=>{t&&e&&o?(console.log("signIn:onRecaptchaResult.1","phone",t,"auth",e,"appVerifier",o),(0,n.$g)(e,t,o).then(n=>{console.log("signIn:onRecaptchaResult.2","phone",t,"auth",e,"appVerifier",o),S(n,r).then(r=>{console.log("signIn:onRecaptchaResult.3","phone",t,"auth",e,"appVerifier",o),s(r)}).catch(r=>{console.log("signIn:onRecaptchaResult.4","phone",t,"auth",e,"appVerifier",o,"error",r),i(r)})}).catch(r=>{console.log("signIn:onRecaptchaResult.5","phone",t,"auth",e,"appVerifier",o,"error",r),i(r)})):e?console.log("signIn:onRecaptchaResult.7","phone",t,"auth",e,"appVerifier",o):(console.log("signIn:onRecaptchaResult.6","phone",t,"auth",e,"appVerifier",o),i(new T.ZR(U.emptyAuthError,w.messages[U.emptyAuthError])))}),S=(t,o)=>new Promise(async(r,n)=>{console.log("signIn:onConfirmationResult.","result",t,"password",o),f().then(s=>{console.log("signIn:onConfirmationResult.","result",t,"password",o),F(),console.log("signIn:onConfirmationResult.","result",t,"password",o),t.confirm(s).then(t=>{console.log("signIn:onConfirmationResult.","result",t,"password",o);let s=t.user;o&&e?s.email&&P(s.email)?N(s.email,o).then(e=>{r(e)}).catch(t=>{e.signOut().then(()=>{n(t)}).catch(e=>{n(e)})}):e.signOut().then(()=>{n(new T.ZR(U.phoneHasNoEmailError,w.messages[U.phoneHasNoEmailError]))}).catch(e=>{n(e)}):r(t)}).catch(e=>{console.log("signIn:onConfirmationResult.","result",t,"password",o,"error",e),n(e)})}).catch(e=>{F(),console.log("signIn:onConfirmationResult.","result",t,"password",o,"error",e),n(e)})}),f=()=>new Promise((e,t)=>{i(!0),L(e,t)}),L=(e,t)=>{let o=window.sessionStorage.getItem(y.AUTH_FLOW_PHONE_OTP_SUBMITTED);console.log("pollOtp:otpRequestDone.otp",o,o?"true":"false"),o?C(o)?t(new T.ZR(U.emptyOtpError,w.messages[U.emptyOtpError])):e(o):setTimeout(()=>{L(e,t)},w.promptPollInterval)},F=()=>{l(void 0),i(!1),d(!1),window.sessionStorage.removeItem(y.AUTH_FLOW_PHONE_OTP_SUBMITTED)},N=(t,o)=>new Promise((r,s)=>{e?(0,n.e5)(e,t,o).then(e=>{r(e)}).catch(e=>{s(e)}):s(new T.ZR(U.emptyAuthError,w.messages[U.emptyAuthError]))}),H=()=>{h(""),a&&0!=a.length?window.sessionStorage.setItem(y.AUTH_FLOW_PHONE_OTP_SUBMITTED,a):h(w.messages[U.emptyOtpError])},D=()=>(0,r.jsx)(m.xu,{children:o?(0,r.jsxs)(W,{title:w.messages[U.otpInputTitle],isOpen:!0,onClose:()=>{l(void 0),window.sessionStorage.setItem(y.AUTH_FLOW_PHONE_OTP_SUBMITTED,"")},children:[(0,r.jsx)(I.Z,{tpe:I.Z.TYPES.text,mb:4,title:w.messages[U.otpInputTitle],placeholder:w.messages[U.otpInputPlaceholder],value:a,onChange:e=>{l(e)},errorMessage:u}),(0,r.jsx)(g.Z,{onClick:H,loading:!C(a)&&c,children:w.messages[U.otpConfirmationButtonText]})]}):null});return{signIn:A,onSignInPrompt:D}},b=e=>{var t=e||"";if(!t.includes("?"))return{};{t=t.substring(t.indexOf("?")+1);let e=JSON.parse('{"'+decodeURI(t).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}');return e}};function B(){let[e,t]=(0,s.useState)({});return(0,s.useEffect)(()=>{if(window.location.href){let e=b(window.location.href);t(e||{})}},[]),e}var Z=function(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,i=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,[l,c]=(0,s.useState)(F);(0,s.useEffect)(()=>{c({...F,...t||{}})},[t]);let d=B();(0,s.useEffect)(()=>{e&&(0,n.JB)(e,window.location.href)&&R()},[d&&e]);let[u,m]=(0,s.useState)(),[h,p]=(0,s.useState)(!1),[E,w]=(0,s.useState)(),[_,A]=(0,s.useState)(),[O,P]=(0,s.useState)(),R=()=>{e?(m("signInWithEmailLink"),S().then(t=>{L(),(0,n.P6)(e,t,window.location.href).then(e=>{m(null),i&&i(d,e)}).catch(e=>{m(null),a&&a(d,e)})}).catch(e=>{m(null),L(),a&&a(d,e)})):a&&a(d,new T.ZR(U.emptyAuthError,l[U.emptyAuthError]))},S=()=>new Promise((e,t)=>{let o=window.localStorage.getItem(y.AUTH_FLOW_EMAIL_FOR_SIGN_IN);o&&o.length>0?(window.localStorage.removeItem(y.AUTH_FLOW_EMAIL_FOR_SIGN_IN),e(o)):(p(!0),f(e,t))}),f=(e,t)=>{let r=window.sessionStorage.getItem(y.AUTH_FLOW_PROMPT_EMAIL_SUBMITTED);console.log("pollEmail:email",r),r?r&&!C(r)?e(r):t(new T.ZR(U.emptyEmailError,l[U.emptyEmailError])):setTimeout(()=>{f(e,t)},o)},L=()=>{p(!1),w(void 0),P(!1),window.sessionStorage.removeItem(y.AUTH_FLOW_PROMPT_EMAIL_SUBMITTED)},x=()=>{A(""),C(E)?A(l[U.emptyEmailError]):(window.sessionStorage.setItem(y.AUTH_FLOW_PROMPT_EMAIL_SUBMITTED,E),P(!0))},v=()=>h?(0,r.jsxs)(W,{title:l[U.emailInputTitle],isOpen:!0,onClose:()=>{w(void 0),window.sessionStorage.setItem(y.AUTH_FLOW_PROMPT_EMAIL_SUBMITTED,"")},children:[(0,r.jsx)(I.Z,{tpe:I.Z.TYPES.text,mb:4,title:l[U.emailInputTitle],placeholder:l[U.emailInputPlaceholder],value:E,onChange:e=>{w(e)},errorMessage:_}),(0,r.jsx)(g.Z,{onClick:x,loading:!C(E)&&O,children:l[U.emailConfirmationButtonText]})]}):null;return{pendingEmailSignInCallback:u,onEmailSignInCallbackPrompt:v}};let k={verifyEmail:"verifyEmail",recoverEmail:"recoverEmail",resetPassword:"resetPassword"};var V=function(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,i=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,l=arguments.length>5?arguments[5]:void 0,c=arguments.length>6?arguments[6]:void 0,{pendingEmailSignInCallback:d,onEmailSignInCallbackPrompt:u}=Z(e,t,o,i,a),[h,p]=(0,s.useState)(F);(0,s.useEffect)(()=>{p({...F,...t||{}})},[t]);let E=B();(0,s.useEffect)(()=>{e&&(E.oobCode?j(E.oobCode,E.mode):a&&a(E,new T.ZR(U.noEmailVerificationCode,h[U.noEmailVerificationCode])))},[E&&e]);let[w,_]=(0,s.useState)(),[A,O]=(0,s.useState)(!1),[P,R]=(0,s.useState)(),[f,L]=(0,s.useState)(),[x,v]=(0,s.useState)(),[N,H]=(0,s.useState)(),[D,M]=(0,s.useState)(),j=(e,t)=>{switch(t){case k.verifyEmail:b(e);break;case k.recoverEmail:V(e);break;case k.resetPassword:G(e);break;default:if(a){let e=C(t)?new T.ZR(U.noEmailVerificationMode,h[U.noEmailVerificationMode]):new T.ZR(U.invalidEmailVerificationMode,h[U.invalidEmailVerificationMode]);a(E,e)}}},b=t=>{e?(_(E.mode),(0,n.iA)(e,t).then(()=>{_(null),i&&i(E,S("link",e.currentUser))}).catch(e=>{_(null),a&&a(E,e)})):a&&a(E,new T.ZR(U.emptyAuthError,h[U.emptyAuthError]))},V=t=>{e?(_(E.mode),(0,n.bX)(e,t).then(o=>{_(null);let r=o.data.email;(0,n.iA)(e,t).then(()=>{c&&r?(0,n.LS)(e,r).then(()=>{_(null),i&&i(E,S("link",e.currentUser))}).catch(e=>{_(null),a&&a(E,e)}):(_(null),i&&i(E,S("link",e.currentUser)))}).catch(e=>{_(null),a&&a(E,e)})}).catch(e=>{_(null),a&&a(E,e)})):a&&a(E,new T.ZR(U.emptyAuthError,h[U.emptyAuthError]))},G=t=>{e?(_(E.mode),(0,n.TX)(e,t).then(o=>{J().then(r=>{z(),(0,n.LG)(e,t,r).then(()=>{(0,n.e5)(e,o,r).then(e=>{_(null),i&&i(E,e)}).catch(e=>{_(null),a&&a(E,e)})}).catch(e=>{_(null),a&&a(E,e)})}).catch(e=>{_(null),z(),a&&a(E,e)})}).catch(e=>{_(null),a&&a(E,e)})):a&&a(E,new T.ZR(U.emptyAuthError,h[U.emptyAuthError]))},J=()=>new Promise((e,t)=>{O(!0),K(e,t)}),K=(e,t)=>{let r=window.sessionStorage.getItem(y.AUTH_FLOW_PROMPT_PASSWORD_SUBMITTED);console.log("pollPassword:password",r),r?r&&!C(r)?e(r):t(new T.ZR(U.emptyPasswordError,h[U.emptyPasswordError])):setTimeout(()=>{K(e,t)},o)},z=()=>{O(!1),R(void 0),M(!1),window.sessionStorage.removeItem(y.AUTH_FLOW_PROMPT_PASSWORD_SUBMITTED)},Y=()=>{v(""),H("")},q=()=>{Y(),C(P)?v(h[U.emptyPasswordError]):C(f)?H(h[U.emptyPasswordError]):P===f||l?(window.sessionStorage.setItem(y.AUTH_FLOW_PROMPT_PASSWORD_SUBMITTED,P),M(!0)):H(h[U.passwordMismatchError])},$=()=>A?(0,r.jsxs)(m.xu,{children:[A?(0,r.jsxs)(W,{title:h[U.newPasswordInputTitle],isOpen:!0,onClose:()=>{R(void 0),window.sessionStorage.setItem(y.AUTH_FLOW_PROMPT_PASSWORD_SUBMITTED,"")},children:[(0,r.jsx)(I.Z,{tpe:I.Z.TYPES.password,mb:4,title:h[U.newPasswordInputTitle],placeholder:h[U.newPasswordInputPlaceholder],value:P,onChange:e=>{R(e)},errorMessage:x}),l?null:(0,r.jsx)(I.Z,{tpe:I.Z.TYPES.password,mb:4,title:h[U.passwordRetypeInputTitle],placeholder:h[U.passwordRetypeInputPlaceholder],value:P,onChange:e=>{L(e)},errorMessage:N}),(0,r.jsx)(g.Z,{onClick:q,loading:!C(P)&&D,children:h[U.passwordConfirmationButtonText]})]}):null,u()]}):null;return{pendingCallback:w||d,onCallbackPrompt:$}},G=function(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:J,a=arguments.length>4?arguments[4]:void 0,l=arguments.length>5?arguments[5]:void 0,[c,m]=(0,s.useState)(F);(0,s.useEffect)(()=>{m({...F,...t||{}})},[t]);let[h,p]=(0,s.useState)(!1),[E,w]=(0,s.useState)(),[_,A]=(0,s.useState)(),[O,P]=(0,s.useState)(),[R,f]=(0,s.useState)(),[L,x]=(0,s.useState)(""),[v,N]=(0,s.useState)(""),[H,D]=(0,s.useState)();(0,s.useEffect)(()=>{if(e){let t=(0,n.Aj)(e,t=>{if(t){let e=window.sessionStorage.getItem(y.AUTH_FLOW_AUTH_LINK_PENDING_CREDENTIAL);if(e&&t.email){window.sessionStorage.removeItem(y.AUTH_FLOW_AUTH_LINK_PENDING_CREDENTIAL);try{let o=n.jh.fromJSON(e);(0,n.ZJ)(t,o).then(r=>{console.log("PendingUserCredLinked:userCredential",r,"currentUser",t,"pendingCred",o,"pendingCredJSon",JSON.parse(e)),a?(M(),a(r)):j()}).catch(r=>{console.log("PendingUserCredLinked:error1",r,"currentUser",t,"pendingCred",o,"pendingCredJSon",JSON.parse(e)),l&&l(r)})}catch(e){console.log("PendingUserCredLinked:error2",e),l&&l(e)}}else a?(M(),a(S("signIn",t))):j()}else(0,n.cx)(e).catch(e=>{z(e).catch(e=>{l&&l(e)})})});return()=>{t()}}},[e]);let M=()=>{try{window.sessionStorage.removeItem(y.AUTH_FLOW_REDIRECT_CALLBACK_URL)}catch(e){}},j=()=>{let e=window.sessionStorage.getItem(y.AUTH_FLOW_REDIRECT_CALLBACK_URL);e&&(window.sessionStorage.removeItem(y.AUTH_FLOW_REDIRECT_CALLBACK_URL),window.location.href=e)},b=(t,o,r)=>e?o?K(e,t,r):B(e,t):new Promise((e,t)=>{t(new T.ZR(U.emptyAuthError,c[U.emptyAuthError]))}),B=(e,t)=>(Z(e,t),new Promise((e,t)=>{k().then(t=>{G(),e(t)}).catch(e=>{G(),t(e)})})),Z=(e,t)=>{(0,n.rh)(e,t).then(e=>{window.sessionStorage.setItem(y.AUTH_FLOW_SOCIAL_CREDENTIAL,JSON.stringify(e))}).catch(e=>{z(e,!0).then(e=>{window.sessionStorage.setItem(y.AUTH_FLOW_SOCIAL_CREDENTIAL,JSON.stringify(e))}).catch(e=>{window.sessionStorage.setItem(y.AUTH_FLOW_SOCIAL_CREDENTIAL_ERROR,JSON.stringify(e))})})},k=()=>new Promise((e,t)=>{V(e,t)}),V=(e,t)=>{let r=window.sessionStorage.getItem(y.AUTH_FLOW_SOCIAL_CREDENTIAL),n=window.sessionStorage.getItem(y.AUTH_FLOW_SOCIAL_CREDENTIAL_ERROR);console.log("pollOtp:otpRequestDone.credential",r,"credentialError",n),r||n?r?e(JSON.parse(r)):n&&t(JSON.parse(n)):setTimeout(()=>{V(e,t)},o)},G=()=>{window.sessionStorage.removeItem(y.AUTH_FLOW_SOCIAL_CREDENTIAL),window.sessionStorage.removeItem(y.AUTH_FLOW_SOCIAL_CREDENTIAL_ERROR)},K=(e,t,o)=>(o&&window.sessionStorage.setItem(y.AUTH_FLOW_REDIRECT_CALLBACK_URL,o),(0,n.F6)(e,t)),z=(t,o)=>new Promise((r,s)=>{if(e&&"auth/account-exists-with-different-credential"===t.code){var i=t.credential;let a=t.email;(0,n.Nr)(e,a).then(l=>{"password"===l[0]?$().then(t=>(Q(),(0,n.e5)(e,a,t))).then(e=>(0,n.ZJ)(e.user,i)).then(e=>{r(e)}).catch(e=>{s(e)}):(x(i.providerId),N(l[0]),q(l[0])?Y(i,r,s,t,o):s(t))})}else s(t)}),Y=(e,t,o,r,n)=>{window.sessionStorage.setItem(y.AUTH_FLOW_AUTH_LINK_PENDING_CREDENTIAL,JSON.stringify(e.toJSON())),window.sessionStorage.setItem(y.AUTH_FLOW_SOCIAL_CREDENTIAL_ERROR_TEMP,JSON.stringify(r)),n?(window.resolutionResolve=t,window.resolutionReject=o):D(!0),f(!0)},q=e=>{switch(e){case n.F7.FACEBOOK:return new n._O;case n.F7.GOOGLE:return new n.hJ;case n.F7.TWITTER:return new n.c4;case n.F7.GITHUB:return new n.GH;default:return null}},$=()=>new Promise((e,t)=>{p(!0),X(e,t)}),X=(e,t)=>{let r=window.sessionStorage.getItem(y.AUTH_FLOW_PROMPT_PASSWORD_SUBMITTED);console.log("pollPassword:password",r),r?C(r)?t(new T.ZR(U.emptyPasswordError,c[U.emptyPasswordError])):e(r):setTimeout(()=>{X(e,t)},o)},Q=()=>{p(!1),w(void 0),P(!1),window.sessionStorage.removeItem(y.AUTH_FLOW_PROMPT_PASSWORD_SUBMITTED)},ee=()=>{A(""),C(E)?A(c[U.emptyPasswordError]):(window.sessionStorage.setItem(y.AUTH_FLOW_PROMPT_PASSWORD_SUBMITTED,E),P(!0))},et=()=>h?(0,r.jsxs)(W,{title:c[U.passwordInputTitle],isOpen:!0,onClose:()=>{w(void 0),window.sessionStorage.setItem(y.AUTH_FLOW_PROMPT_PASSWORD_SUBMITTED,"")},children:[(0,r.jsx)(I.Z,{tpe:I.Z.TYPES.password,mb:4,title:c[U.passwordInputTitle],placeholder:c[U.passwordInputPlaceholder],value:E,onChange:e=>{w(e)},errorMessage:_}),(0,r.jsx)(g.Z,{onClick:ee,loading:!C(E)&&O,children:c[U.passwordConfirmationButtonText]})]}):null,eo=()=>{f(void 0),P(!0);let e=window.sessionStorage.getItem(y.AUTH_FLOW_SOCIAL_CREDENTIAL_ERROR_TEMP);e&&window.sessionStorage.setItem(y.AUTH_FLOW_SOCIAL_CREDENTIAL_ERROR,e)},er=()=>R?(0,r.jsxs)(W,{title:c[U.credentialCollisionResolutionRequestTitle],isOpen:!0,onClose:eo,children:[(0,r.jsx)(d.x,{as:"div",mb:4,children:i(L,v)}),(0,r.jsxs)(u.U,{justifyContent:"space-between",alignItems:"flex-start",children:[(0,r.jsx)(g.Z,{onClick:()=>{let t=q(v);e&&t&&(H?K(e,t):((0,n.rh)(e,t).then(e=>{window.sessionStorage.setItem(y.AUTH_FLOW_SOCIAL_CREDENTIAL,JSON.stringify(e))}).catch(e=>{window.sessionStorage.setItem(y.AUTH_FLOW_SOCIAL_CREDENTIAL_ERROR,JSON.stringify(e))}),f(!1)))},loading:!C(E)&&O,children:c[U.credentialCollisionResolutionAcceptText]}),(0,r.jsx)(g.Z,{onClick:eo,loading:!C(E)&&O,children:c[U.credentialCollisionResolutionDeclineText]})]})]}):null,en=()=>(0,r.jsxs)(r.Fragment,{children:[et(),er()]}),es=(e,t)=>b(new n._O,e,t),ei=(e,t)=>b(new n.hJ,e,t),ea=(e,t)=>b(new n.c4,e,t),el=(e,t)=>b(new n.GH,e,t);return{socialSignIn:b,socialSignInPopUp:B,socialSignInRedirect:K,faceBookSignIn:es,googleSignIn:ei,twitterSignIn:ea,githubSignIn:el,handleAuthErrors:z,onSocialSignInPrompt:en}};let J=(e,t)=>{let o=f(e),n=f(t);return(0,r.jsx)(d.x,{as:"div",textAlign:"center",children:o&&n?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.x,{children:"An error occurred because there is a ".concat(n," account with the same email address as this ").concat(o," account.")}),(0,r.jsx)(d.x,{children:"Would you like to link the two accounts to resolve the error?"})]}):o?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.x,{children:"An error occurred because there is an account with the same email address as this ".concat(o," account.")}),(0,r.jsx)(d.x,{children:"Would you like to link the two accounts to resolve the error?"})]}):n?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.x,{children:"An error occurred because there is a ".concat(n," account with the same email address as this account.")}),(0,r.jsx)(d.x,{children:"Would you like to link the two accounts to resolve the error?"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.x,{children:"An error occurred because there an account with the same email address as this account."}),(0,r.jsx)(d.x,{children:"Would you like to link the two accounts to resolve the error?"})]})})},K=(e,t)=>{let{socialSignIn:o,socialSignInPopUp:s,socialSignInRedirect:i,faceBookSignIn:a,googleSignIn:l,twitterSignIn:c,githubSignIn:d,onSocialSignInPrompt:u}=G(e,null==t?void 0:t.messages,null==t?void 0:t.promptPollInterval,null==t?void 0:t.onCredentialResolutionRequestMessage),{signUp:m,onSignUpPrompt:h}=D(e,t),{signIn:p,onSignInPrompt:E}=j(e,t),{pendingCallback:w,onCallbackPrompt:_}=V(e,null==t?void 0:t.messages,null==t?void 0:t.promptPollInterval,null==t?void 0:t.onCallbackSuccess,null==t?void 0:t.onCallbackFailure,null==t?void 0:t.skipPasswordRetype,null==t?void 0:t.sendPasswordResetEmailOnEmailRecovered),I=(o,r)=>new Promise((s,i)=>{if(e){var a,l;let c={...(null==t?void 0:t.actionCodeSettings)||{},...r||{},url:null==window?void 0:null===(a=window.location)||void 0===a?void 0:a.href};if(C(c.url))e:null==window||null===(l=window.location)||void 0===l||l.href;(0,n.LS)(e,o,c).then(()=>{s(null)}).catch(e=>{i(e)})}else i(new T.ZR(U.emptyAuthError,((null==t?void 0:t.messages)||F)[U.emptyAuthError]))}),g=()=>(0,r.jsxs)(r.Fragment,{children:[h(),E(),u(),_()]});return{signUp:m,signIn:p,resetPassword:I,socialSignIn:o,socialSignInPopUp:s,socialSignInRedirect:i,faceBookSignIn:a,googleSignIn:l,twitterSignIn:c,githubSignIn:d,onAuthPrompt:g,pendingCallback:w}};var z=K},9501:function(e,t,o){var r=o(5893),n=o(2498),s=o(9222),i=o(4641),a=o(3100),l=o(8911),c=o(3136);let d=e=>{let{as:t,onClick:o,children:d,variant:u,bgColor:m,outlineColor:h,leftIcon:p,rightIcon:E,loading:w,disabled:_,...T}=e,I=m||(0,n.ff)("colorAccent.light","colorAccent.dark"),g=h||(0,n.ff)("colorAccentDestination.light","colorAccentDestination.dark");return(0,r.jsx)(s.z,{as:t||"button",cursor:"pointer",disabled:_||w,onClick:e=>{o&&!(_||w)&&o(e)},display:"inline-flex",justifyContent:"center",alignItems:"center",p:"0px 24px",h:"48px",letterSpacing:"0.03em",textAlign:"center",borderRadius:"16px",bg:"outline"==u?"transparent":I,border:"outline"==u?"2px solid":"none",borderColor:"outline"==u?g:"transparent",color:"outline"==u?g:"#fff",boxShadow:"ghost"==u||"outline"==u?"none":"rgb(14 14 44 / 40%) 0px -1px 0px 0px inset",opacity:"ghost"==u?"0.8":"1",transition:"background-color 0.2s ease 0s, opacity 0.2s ease 0s",_hover:{opacity:"0.65",border:"none !important"},_disabled:{opacity:"0.65",cursor:"not-allowed"},...T,children:(0,r.jsxs)(i.U,{justifyContent:"center",alignItems:"center",children:[p?(0,r.jsx)(a.xu,{mr:"7px",children:p}):null,(0,r.jsx)(l.x,{as:"div",children:d}),w?(0,r.jsx)(a.xu,{as:c.g4,display:"inline",width:"20%",height:"20%",color:"#fff"}):E?(0,r.jsx)(a.xu,{ml:"7px",children:E}):null]})})};t.Z=d}}]);